---
- name: mysql server configuration
  hosts: localhost
  connection: local
  become: yes
  tasks:
   - name: Installing mysql-server 
     ansible.builtin.dnf:
      name: mysql-server
      state: present
   - name: Enable and start mysql-server(mysqld)
     ansible.builtin.service:
      enabled: yes
      state: started
      name: mysqld

   - name: connect to mysql server
     community.mysql.mysql_info:
      login_user: root
      login_password: "ExpenseApp@1"
      login_host: "172.31.91.241"
      register: mysql_info
      ignore_errors: true    
  #  - name: Setting root password
  #    ansible.builtin.command: "mysql_secure_installation --set-root-pass ExpenseApp@1"    